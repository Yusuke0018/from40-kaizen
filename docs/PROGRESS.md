## Progress Log

**Latest update:** 2025-11-25
**Focus:** 新ルール導入と機能拡張

### Done
- 習慣形成アプリとしてシンプル化
  - 睡眠、食事、気分などの記録機能を削除
  - daily-record関連のAPI・型・スキーマを削除
  - export/history画面を削除
- 習慣機能を最大3つまでに拡張（従来2つ→3つ）
- Today画面を習慣チェック専用UIに刷新
- Settings画面を習慣管理に特化
- READMEを更新

### 2025-11-25 新機能追加
- **新ルール導入**
  - 達成条件: 2日に1回以上チェックで継続
  - リセット条件: 3日以上空くと最初からカウント
  - 殿堂入り: 90日達成で殿堂入り
- **励ましコメント機能**
  - 200種類以上のコメントを実装
  - カテゴリ: streak, restart, milestone, general, hallOfFame, warning
  - チェック時にポップアップ表示
  - 状況に応じたコメント選択（連続日数、再開、マイルストーン等）
- **History画面を新規作成**
  - 各習慣の詳細統計（総チェック数、最長連続、達成率など）
  - 30日分のカレンダー表示
  - リスタート回数、平均チェック間隔の表示
  - 展開可能なカード形式
- **Today画面の強化**
  - ルール説明を追加
  - 2日空いている場合の警告表示
  - チェック時のコメントポップアップ
  - 再開時の専用コメント表示
- **型システム拡張**
  - GoalStats型を追加（統計情報）
  - CheckRecord型を追加（チェック履歴）
  - Goal型を拡張（comment, isRestart, daysSinceLastCheck等）
- **ナビゲーション更新**
  - Today / History / Settings の3画面構成

### Structure
- `/today` - 習慣の毎日チェック（進捗表示、ストリーク、殿堂入り、警告）
- `/history` - 習慣の統計情報と達成履歴（カレンダー、グラフ）
- `/settings` - 習慣の追加・編集・削除、アカウント管理
- `/api/goals` - 習慣CRUD（最大3つ制限、新ルール対応）
- `/api/goals/check` - 習慣チェックとストリーク計算（新ルール対応）

### Next up
1. Firestoreセキュリティルール更新
2. オフライン対応（IndexedDB）
3. 通知リマインダー機能
4. テスト追加
